# 棋譜解析の形勢判断基準

## 概要

棋譜解析の形勢判断は `src/analysis/kifuanalysislistmodel.cpp` の `getJudgementString()` 関数で実装されている。評価値（先手視点、centipawn単位）の絶対値をもとに形勢を5段階で判定する。

## 判断基準

| 評価値の絶対値 | 形勢表現 | 表示例 |
|---|---|---|
| 0〜100 | 互角 | 互角 |
| 101〜300 | やや有利 | 先手やや有利 / 後手やや有利 |
| 301〜600 | 有利 | 先手有利 / 後手有利 |
| 601〜1000 | 優勢 | 先手優勢 / 後手優勢 |
| 1001以上 | 勝勢 | 先手勝勢 / 後手勝勢 |

- 評価値は先手視点（正=先手有利、負=後手有利）
- 「互角」の場合は先手/後手の接頭辞なし
- それ以外は評価値の符号に応じて「先手」または「後手」を付与

## 詰みの場合

評価値に「詰」または「mate」が含まれる場合は、上記の閾値判定ではなく以下のように表示する。

| 条件 | 表示 |
|---|---|
| 負の値（`-` で始まる） | 後手勝ち |
| 正の値またはゼロ | 先手勝ち |

## 実装箇所

- **関数**: `getJudgementString()` (`src/analysis/kifuanalysislistmodel.cpp:72-115`)
- **表示**: `KifuAnalysisListModel::data()` のカラム4（「形勢」列）で呼び出される
