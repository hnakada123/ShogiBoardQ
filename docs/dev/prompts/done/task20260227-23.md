# Task 23: ダイアログデフォルトサイズ定数化（ISSUE-063）

## フェーズ
F: ダイアログ品質・テスト拡充

## 前提条件
- Task 21（ISSUE-061: ダイアログサイズ保存/復元の共通化）が完了していること

## 目的
各ダイアログに埋め込まれているサイズのマジックナンバーを名前付き定数に置換し、コードの意図を明確にする。

## 現状
各ダイアログに以下のようなマジックナンバーが散在:
- `resize(600, 500)` — josekimergedialog, kifupastedialog
- `resize(620, 720)` — pvboarddialog
- `resize(620, 780)` — sfencollectiondialog
- `resize(600, 550)` — tsumeshogigeneratordialog
- `resize(950, 600)` — josekiwindow
- `setMinimumSize(400, 300)` — changeenginesettingsdialog
- `setMinimumSize(500, 400)` — kifupastedialog, josekimergedialog

## 対象ファイル
- `src/dialogs/josekiwindowui.cpp`
- `src/dialogs/csagamedialog.cpp`
- `src/dialogs/josekimovedialog.cpp`
- `src/dialogs/pvboarddialog.cpp`
- `src/dialogs/kifuanalysisdialog.cpp`
- `src/dialogs/josekimergedialog.cpp`
- `src/dialogs/startgamedialog.cpp`
- `src/dialogs/kifupastedialog.cpp`
- `src/dialogs/sfencollectiondialog.cpp`
- `src/dialogs/engineregistrationdialog.cpp`
- `src/dialogs/changeenginesettingsdialog.cpp`
- `src/dialogs/tsumeshogigeneratordialog.cpp`
- `src/dialogs/csawaitingdialog.cpp`
- `src/dialogs/menuwindow.cpp`

## 詳細手順

### Step 1: 全ダイアログのサイズ値を調査
各ダイアログの `resize()` と `setMinimumSize()` の引数値を一覧化する:

```bash
grep -rn 'resize(' src/dialogs/ --include="*.cpp"
grep -rn 'setMinimumSize(' src/dialogs/ --include="*.cpp"
```

### Step 2: 各ダイアログの .cpp に constexpr 定数を定義
各ファイルの先頭（include の後、無名 namespace 内）に定数を追加:

```cpp
namespace {
    constexpr QSize kDefaultSize{600, 500};
    constexpr QSize kMinimumSize{500, 400};  // 必要な場合のみ
}
```

### Step 3: マジックナンバーの置換
```cpp
// Before
resize(600, 500);
setMinimumSize(500, 400);

// After
resize(kDefaultSize);
setMinimumSize(kMinimumSize);
```

Task 21 で `DialogUtils::restoreDialogSize()` に移行済みの場合:
```cpp
// Before
DialogUtils::restoreDialogSize(this, savedSize, QSize(600, 500));

// After
DialogUtils::restoreDialogSize(this, savedSize, kDefaultSize);
```

### Step 4: ビルド・テスト
```bash
cmake --build build
cd build && ctest --output-on-failure
```

## 注意事項
- `constexpr QSize` は Qt 6 で使用可能（`constexpr` コンストラクタあり）
- 定数名は `kDefaultSize` / `kMinimumSize` で統一
- 各ダイアログの `.cpp` ファイル内の無名 namespace に定義（ヘッダー公開不要）

## 完了条件
- [ ] ダイアログサイズの数値リテラルが名前付き定数に置換されている
- [ ] サイズ値の意図がコード上で明確になっている
- [ ] 振る舞い互換（全テスト Pass）
- [ ] `resize()` / `setMinimumSize()` にマジックナンバーが残っていない

## 検証コマンド
```bash
cmake --build build
cd build && ctest --output-on-failure
# マジックナンバーの残存確認（resize に数値が直接渡されていないか）
grep -rn 'resize([0-9]' src/dialogs/ --include="*.cpp"
grep -rn 'setMinimumSize([0-9]' src/dialogs/ --include="*.cpp"
# 定数の使用確認
grep -rn 'kDefaultSize\|kMinimumSize' src/dialogs/ --include="*.cpp" | wc -l
```
